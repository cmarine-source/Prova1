<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Premium Menswear and Streetwear | Cmarine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

    <style>
        .size-button.unavailable {
            text-decoration: line-through;
            color: #b7b7b7;
            cursor: not-allowed;
            border-color: #e2e8f0;
        }

        .size-button.active {
            border-color: black;
            font-weight: 600;
        }

        .footer-accordion-header.open .accordion-icon {
            transform: rotate(180deg);
        }

        .footer-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .footer-accordion-content.open {
            max-height: 200px; /* Aumenta questo valore se il tuo contenuto è più lungo */
        }

        .product-card .product-overlay {
            opacity: 0;
            transition: opacity 0.3s;
        }

        .product-card:hover .product-overlay {
            opacity: 1;
        }

        #mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }

        #mobile-menu.open {
            transform: translateX(0);
        }

        /* Stili per il carosello delle immagini */
        .swiper-container {
            width: 100%;
            height: auto;
        }

        .swiper-slide {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .swiper-slide img {
            display: block;
            width: 100%;
            height: auto;
            object-fit: contain;
        }

        /* Stili per le miniature */
        .product-gallery-thumbs .swiper-slide {
            height: 100px;
            opacity: 0.4;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s, opacity 0.3s;
        }
        
        .product-gallery-thumbs .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-gallery-thumbs .swiper-slide-thumb-active {
            opacity: 1;
            border-color: #000;
        }

        /* Nascondi frecce su mobile */
        @media (max-width: 640px) {
            .swiper-button-next,
            .swiper-button-prev {
                display: none !important;
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900 font-sans">

    <header class="bg-white sticky top-0 z-50 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-bold text-gray-900">Cmarine</a>
                </div>

                <nav class="hidden md:flex space-x-8">
                    <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors duration-300">New Arrivals</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors duration-300">Menswear</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors duration-300">Brands</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors duration-300">Sale</a>
                </nav>

                <div class="flex items-center space-x-4">
                    <button class="text-gray-600 hover:text-gray-900 transition-colors duration-300">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="text-gray-600 hover:text-gray-900 transition-colors duration-300">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="text-gray-600 hover:text-gray-900 transition-colors duration-300">
                        <i class="fas fa-shopping-bag"></i>
                    </button>
                    <button id="mobile-menu-button" class="md:hidden text-gray-600 hover:text-gray-900 transition-colors duration-300">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="md:hidden fixed top-0 right-0 h-full w-64 bg-white shadow-xl z-40">
            <div class="p-4">
                <button id="close-menu-button" class="absolute top-4 right-4 text-gray-600 hover:text-gray-900">
                    <i class="fas fa-times text-xl"></i>
                </button>
                <a href="#" class="block py-2 text-gray-800 hover:bg-gray-100 transition-colors">New Arrivals</a>
                <a href="#" class="block py-2 text-gray-800 hover:bg-gray-100 transition-colors">Menswear</a>
                <a href="#" class="block py-2 text-gray-800 hover:bg-gray-100 transition-colors">Brands</a>
                <a href="#" class="block py-2 text-gray-800 hover:bg-gray-100 transition-colors">Sale</a>
            </div>
        </div>
    </header>

    <main class="py-12 md:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row -mx-4">
                
                <div class="md:w-1/2 px-4 mb-8 md:mb-0">
                    <div class="swiper-container product-gallery-main relative">
                        <div class="swiper-wrapper" id="main-image-container">
                            </div>
                        <div class="swiper-button-next z-10 hidden sm:block"></div>
                        <div class="swiper-button-prev z-10 hidden sm:block"></div>
                        <div class="swiper-pagination mt-4"></div>
                    </div>
                    
                    <div class="swiper-container product-gallery-thumbs mt-4">
                        <div class="swiper-wrapper" id="thumbnail-container">
                            </div>
                    </div>
                </div>

                <div class="md:w-1/2 px-4">
                    <div class="sticky top-20">
                        <p class="text-sm font-semibold uppercase text-gray-500 mb-2" id="product-brand">...</p>
                        <h1 class="text-3xl font-bold mb-2" id="product-name">...</h1>
                        <p class="text-xl text-gray-700 mb-6" id="product-price">...</p>

                        <div class="mb-6">
                            <h2 class="text-lg font-semibold mb-2">Description</h2>
                            <p class="text-gray-600" id="product-description">...</p>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-semibold mb-2">Details</h2>
                            <ul class="list-disc list-inside text-gray-600 space-y-1" id="product-details">
                                </ul>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-semibold mb-2">Size</h2>
                            <div id="size-options" class="flex flex-wrap gap-2">
                                </div>
                        </div>

                        <button class="w-full bg-black text-white py-3 rounded-sm font-semibold hover:bg-gray-800 transition-colors duration-300">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <section class="py-12 md:py-16 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-2xl font-bold mb-8 text-center">Related Products</h2>
            <div id="related-products-container" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6">
                </div>
        </div>
    </section>

    <footer class="bg-white py-12 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Cmarine</h3>
                    <p class="text-sm text-gray-600 mb-4">Iscriviti per ricevere aggiornamenti, offerte esclusive e altro ancora.</p>
                    <form class="flex">
                        <input type="email" placeholder="La tua email" class="w-full px-4 py-2 border rounded-l-sm focus:outline-none focus:ring-1 focus:ring-gray-900">
                        <button type="submit" class="bg-gray-900 text-white px-4 py-2 rounded-r-sm hover:bg-gray-700 transition-colors"><i class="fas fa-arrow-right"></i></button>
                    </form>
                    <div class="flex space-x-4 mt-4 text-gray-600">
                        <a href="#"><i class="fab fa-instagram hover:text-gray-900"></i></a>
                        <a href="#"><i class="fab fa-facebook-f hover:text-gray-900"></i></a>
                        <a href="#"><i class="fab fa-twitter hover:text-gray-900"></i></a>
                    </div>
                </div>

                <div class="md:col-span-1">
                    <div class="footer-accordion-item">
                        <button class="footer-accordion-header w-full text-left py-2 flex items-center justify-between">
                            <h4 class="text-md font-semibold">Shop</h4>
                            <span class="accordion-icon transition-transform transform duration-300 md:hidden"><i class="fas fa-plus"></i></span>
                        </button>
                        <ul class="footer-accordion-content space-y-2 md:space-y-0.5 mt-2 md:mt-0">
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">New Arrivals</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Menswear</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Brands</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Sale</a></li>
                        </ul>
                    </div>
                </div>

                <div class="md:col-span-1">
                    <div class="footer-accordion-item">
                        <button class="footer-accordion-header w-full text-left py-2 flex items-center justify-between">
                            <h4 class="text-md font-semibold">Customer Service</h4>
                            <span class="accordion-icon transition-transform transform duration-300 md:hidden"><i class="fas fa-plus"></i></span>
                        </button>
                        <ul class="footer-accordion-content space-y-2 md:space-y-0.5 mt-2 md:mt-0">
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Shipping & Returns</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">FAQ</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Contact Us</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Terms of Service</a></li>
                        </ul>
                    </div>
                </div>

                <div class="md:col-span-1">
                    <div class="footer-accordion-item">
                        <button class="footer-accordion-header w-full text-left py-2 flex items-center justify-between">
                            <h4 class="text-md font-semibold">About</h4>
                            <span class="accordion-icon transition-transform transform duration-300 md:hidden"><i class="fas fa-plus"></i></span>
                        </button>
                        <ul class="footer-accordion-content space-y-2 md:space-y-0.5 mt-2 md:mt-0">
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Our Story</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Careers</a></li>
                            <li><a href="#" class="text-sm text-gray-600 hover:text-gray-900">Press</a></li>
                        </ul>
                    </div>
                </div>

            </div>
            <div class="mt-8 text-center text-sm text-gray-500 border-t border-gray-200 pt-4">
                © 2024 Cmarine. All Rights Reserved.
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const products = {
                "1": {
                    id: "1",
                    brand: "Helly Hansen",
                    name: "HP AHIGA EVO 5",
                    price: "$120.00",
                    description: "Le scarpe da uomo HP Ahiga Evo 5 Marine Lifestyle portano la linea Ahiga a un livello superiore, con un'intersuola generosa per il massimo comfort. Progettate per le giornate estive al mare o in città, sono realizzate con HH Hydro-Grip per la massima aderenza sulle superfici bagnate, HH Quick Dry per asciugarsi velocemente e HH Max-Vent per la traspirabilità.",
                    details: [
                        "HH® Quick Dry",
                        "HH® Max-Vent",
                        "HH® Lite-Frame",
                        "HH® Comfort Insole",
                        "HH® Hover-Stride",
                        "HH Hydro-Grip",
                        "HH Storm Siping",
                        "Lacci realizzati al 100% con materiale riciclato.",
                        "Fettuccia in poliestere realizzata al 100% con materiale riciclato.",
                        "Intersuola in EVA (etilene vinil acetato) che contiene il 30% di materiale riciclato.",
                        "Fodera interna della scarpa realizzata al 100% con materiale riciclato.",
                        "Etichetta con il marchio tessuta al 100% in poliestere riciclato.",
                        "Gomma per la suola o altre parti della scarpa che contiene il 30% di materiale riciclato.",
                        "La strobel è realizzata al 100% in poliestere riciclato.",
                        "Nastro di rinforzo e rinforzo del collare della scarpa realizzati al 100% in RPET (poliestere riciclato da bottiglie di plastica)."
                    ],
                    images: [
                        "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/2ad4c7cb-40a1-47b7-8349-a68e2bc4bf7e.png?cacheVersion=1714112626",
                        "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/4c22eede-6627-43d9-be5d-2617fce10193.png?cacheVersion=1678266183",
                        "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/16116306-458d-4b5e-a8db-7ecee5d570c9.png?cacheVersion=1678266183",
                        "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/0e0facc3-73c9-4dc8-95b6-df77dd42ec6f.png?cacheVersion=1678953900",
                        "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/99f7921a-41c9-4999-807d-c9d71c8ca9e9.png?cacheVersion=1678953889"
                    ],
                    sizes: {
                        "40": true,
                        "41": false,
                        "42": true,
                        "43": true,
                        "44": false
                    }
                },
                "2": {
                    id: "2",
                    brand: "HAVEN",
                    name: "Tapered Track Pant",
                    price: "$260.00",
                    description: "The HAVEN Tapered Track Pant is made from a high-quality Re-Cotton fabric, offering both comfort and a stylish tapered fit.",
                    details: [
                        "Re-Cotton fabric",
                        "Tapered fit",
                        "Elastic waistband with drawstring",
                        "Zipped pockets"
                    ],
                    images: [
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/HAVEN-Tapered-Track-Pant-Re-Cotton-Olive-1.jpg?v=1748536100&width=800&crop=center",
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/HAVEN-Tapered-Track-Pant-Re-Cotton-Olive-2.jpg?v=1748536100&width=200&crop=center",
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/HAVEN-Tapered-Track-Pant-Re-Cotton-Olive-3.jpg?v=1748536100&width=200&crop=center"
                    ],
                    sizes: {
                        "S": true,
                        "M": true,
                        "L": false,
                        "XL": true
                    }
                },
                "3": {
                    id: "3",
                    brand: "HAVEN",
                    name: "Sleeveless Turtleneck",
                    price: "$140.00",
                    description: "A versatile sleeveless turtleneck from HAVEN, perfect for layering or wearing on its own during warmer days. Crafted from a soft jersey fabric.",
                    details: [
                        "Soft jersey fabric",
                        "Sleeveless design",
                        "Turtleneck collar",
                        "Machine washable"
                    ],
                    images: [
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/HAVEN-Sleeveless-Turtleneck-Jersey-Black-1.jpg?v=1748536034&width=800&crop=center",
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/HAVEN-Sleeveless-Turtleneck-Jersey-Black-2.jpg?v=1748536034&width=200&crop=center",
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/HAVEN-Sleeveless-Turtleneck-Jersey-Black-3.jpg?v=1748536034&width=200&crop=center"
                    ],
                    sizes: {
                        "XS": false,
                        "S": true,
                        "M": true,
                        "L": true
                    }
                },
                "4": {
                    id: "4",
                    brand: "WTAPS",
                    name: "Netminder / LS / Poly Black",
                    price: "$180.00",
                    description: "The Netminder long-sleeve tee by WTAPS, featuring a poly-cotton blend for comfort and durability. Ideal for a relaxed, urban look.",
                    details: [
                        "Poly-cotton blend",
                        "Ribbed cuffs and neckline",
                        "WTAPS logo print",
                        "Relaxed fit"
                    ],
                    images: [
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/WTAPS-Netminder-LS-Poly-Black-1.jpg?v=1748527318&width=800&crop=center",
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/WTAPS-Netminder-LS-Poly-Black-2.jpg?v=1748527318&width=200&crop=center",
                        "https://cdn.shopify.com/s/files/1/0051/7042/files/WTAPS-Netminder-LS-Poly-Black-3.jpg?v=1748527318&width=200&crop=center"
                    ],
                    sizes: {
                        "S": true,
                        "M": true,
                        "L": true,
                        "XL": false
                    }
                }
            };

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const closeMenuButton = document.getElementById('close-menu-button');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', function () {
                    mobileMenu.classList.add('open');
                });
                closeMenuButton.addEventListener('click', function () {
                    mobileMenu.classList.remove('open');
                });
            }
            
            const accordionHeaders = document.querySelectorAll('.footer-accordion-header');
            accordionHeaders.forEach(header => {
                const accordionContent = header.nextElementSibling;
                if (window.innerWidth < 768) {
                    header.addEventListener('click', () => {
                        header.classList.toggle('open');
                        accordionContent.classList.toggle('open');
                    });
                }
            });
            
            window.addEventListener('resize', () => {
                accordionHeaders.forEach(header => {
                    const accordionContent = header.nextElementSibling;
                    if (window.innerWidth >= 768) {
                        header.classList.remove('open');
                        accordionContent.classList.remove('open');
                    }
                });
            });

            // Funzione per aggiornare la pagina con i dati del prodotto
            function updateProductPage(productId) {
                const product = products[productId];
                const mainContent = document.querySelector('.max-w-7xl.mx-auto');
                if (!product) {
                    mainContent.innerHTML = '<div class="text-center py-20"><h1 class="text-3xl font-bold">Prodotto non trovato</h1><p class="mt-4">L\'ID del prodotto non è valido.</p></div>';
                    return;
                }

                // Aggiorna titolo della pagina
                document.getElementById('page-title').textContent = `${product.name} | Cmarine`;

                // Aggiorna i dettagli del prodotto
                document.getElementById('product-brand').textContent = product.brand;
                document.getElementById('product-name').textContent = product.name;
                document.getElementById('product-price').textContent = product.price;
                document.getElementById('product-description').textContent = product.description;

                const productDetailsList = document.getElementById('product-details');
                productDetailsList.innerHTML = '';
                product.details.forEach(detail => {
                    const listItem = document.createElement('li');
                    listItem.textContent = detail;
                    productDetailsList.appendChild(listItem);
                });

                // Gestione delle taglie
                const sizeOptionsContainer = document.getElementById('size-options');
                sizeOptionsContainer.innerHTML = '';
                for (const size in product.sizes) {
                    const isAvailable = product.sizes[size];
                    const button = document.createElement('button');
                    button.textContent = size;
                    button.classList.add('size-button', 'px-4', 'py-2', 'border', 'border-gray-300', 'rounded-sm', 'text-sm', 'hover:border-black');
                    if (!isAvailable) {
                        button.classList.add('unavailable');
                    } else {
                        button.addEventListener('click', () => {
                            document.querySelectorAll('.size-button').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                        });
                    }
                    sizeOptionsContainer.appendChild(button);
                }

                // --- Logica Swiper ---
                const mainImageContainer = document.getElementById('main-image-container');
                const thumbnailContainer = document.getElementById('thumbnail-container');
                
                mainImageContainer.innerHTML = '';
                thumbnailContainer.innerHTML = '';

                product.images.forEach(imgSrc => {
                    const mainSlide = document.createElement('div');
                    mainSlide.classList.add('swiper-slide');
                    mainSlide.innerHTML = `<img src="${imgSrc}" alt="${product.name}">`;
                    mainImageContainer.appendChild(mainSlide);

                    const thumbSlide = document.createElement('div');
                    thumbSlide.classList.add('swiper-slide');
                    thumbSlide.innerHTML = `<img src="${imgSrc}" alt="Thumbnail">`;
                    thumbnailContainer.appendChild(thumbSlide);
                });

                // Inizializza Swiper.js
                let productThumbsSwiper = new Swiper('.product-gallery-thumbs', {
                    spaceBetween: 10,
                    slidesPerView: 4,
                    freeMode: true,
                    watchSlidesVisibility: true,
                    watchSlidesProgress: true,
                });

                let productMainSwiper = new Swiper('.product-gallery-main', {
                    loop: true,
                    spaceBetween: 10,
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    thumbs: {
                        swiper: productThumbsSwiper,
                    },
                });
            }

            // Recupera l'ID del prodotto dall'URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');

            if (productId) {
                updateProductPage(productId);
            } else {
                updateProductPage('1'); // Carica il primo prodotto per default
            }

            // Funzione per generare e popolare i prodotti correlati
            function generateRelatedProducts() {
                const container = document.getElementById('related-products-container');
                const productIds = Object.keys(products);
                const displayedIds = new Set();
                const currentPageId = urlParams.get('id') || '1'; // Usa '1' come ID di default

                while (displayedIds.size < 4 && displayedIds.size < productIds.length) {
                    const randomId = productIds[Math.floor(Math.random() * productIds.length)];
                    if (randomId !== currentPageId) {
                        displayedIds.add(randomId);
                    }
                }
                
                displayedIds.forEach(id => {
                    const product = products[id];
                    const productCard = `
                        <a href="product.html?id=${product.id}" class="product-card group block">
                            <div class="relative overflow-hidden aspect-w-3 aspect-h-4">
                                <img src="${product.images[0]}" alt="${product.name}" class="w-full h-full object-cover transition-transform duration-300 transform group-hover:scale-105">
                                <div class="product-overlay absolute inset-0 bg-black bg-opacity-10 flex items-center justify-center opacity-0 group-hover:opacity-100">
                                    <span class="text-white text-sm uppercase tracking-wider font-semibold">Quick View</span>
                                </div>
                            </div>
                            <div class="mt-4 text-center">
                                <h3 class="text-sm font-semibold uppercase tracking-wider">${product.brand}</h3>
                                <p class="text-sm text-gray-700">${product.name}</p>
                                <p class="mt-1 text-sm font-medium">${product.price}</p>
                            </div>
                        </a>
                    `;
                    container.innerHTML += productCard;
                });
            }
            
            generateRelatedProducts();
        });
    </script>
</body>

</html>
