<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop | Cmarine</title>
    <meta name="description" content="Esplora la vasta collezione di menswear, streetwear e accessori di Cmarine. Trova abbigliamento di alta qualità per uomo, donna e bambini.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
         

        .product-card:hover .product-overlay {
            opacity: 1;
        }

        .product-overlay {
            transition: opacity 0.3s ease;
            opacity: 0;
        }

        .category-card:hover img {
            transform: scale(1.05);
        }

        .category-card img {
            transition: transform 0.3s ease;
        }

        .newsletter-input {
            border-bottom: 1px solid #000;
            transition: border-color 0.3s ease;
        }

        .newsletter-input:focus {
            outline: none;
            border-bottom-color: #555;
        }

        /* Stili specifici per il menu mobile */
        .mobile-menu {
            display: none;
        }

        .mobile-menu.open {
            display: block;
        }

        /* Stili per il footer a fisarmonica */
        .footer-accordion-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem; /* Spazio sotto il titolo */
            border-bottom: 1px solid #e5e7eb; /* Linea separatrice */
            margin-bottom: 1rem; /* Spazio sotto la linea */
        }

        /* Nasconde le liste di link per impostazione predefinita */
        .footer-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
        }

        /* Mostra le liste di link quando la classe 'open' è presente */
        .footer-accordion-content.open {
            max-height: 200px; /* Un valore sufficientemente grande per contenere il contenuto */
            opacity: 1;
            transition: max-height 0.5s ease-in, opacity 0.3s ease-in;
        }

        /* Ruota l'icona freccia quando la sezione è aperta */
        .footer-accordion-header .arrow-icon {
            transition: transform 0.3s ease;
        }

        .footer-accordion-header.open .arrow-icon {
            transform: rotate(180deg);
        }

        /* Rimuovi la border-bottom e i margini per desktop, mantenendo il layout originale */
        @media (min-width: 768px) {
            .footer-accordion-header {
                cursor: default; /* Non cliccabile su desktop */
                border-bottom: none;
                margin-bottom: 1rem; /* Mantieni il margine se desiderato */
            }
            .footer-accordion-header .arrow-icon {
                display: none; /* Nascondi la freccia su desktop */
            }
            .footer-accordion-content {
                max-height: none; /* Sempre visibile su desktop */
                opacity: 1;
            }
        }

        /* Stili per il badge del carrello */
        .cart-badge {
            font-family: sans-serif; /* Assicurati che il font sia leggibile */
            position: absolute;
            top: -5px; /* Sposta più in alto */
            right: -10px; /* Sposta più a destra */
            background-color: #ef4444; /* Rosso vibrante */
            color: white;
            font-size: 0.75rem; /* Testo più piccolo */
            font-weight: bold;
            border-radius: 9999px; /* Completamente rotondo */
            height: 18px; /* Altezza fissa */
            width: 18px; /* Larghezza fissa per renderlo un cerchio */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0; /* Rimuovi padding per controllo dimensione */
            line-height: 1; /* Assicurati che il testo sia centrato verticalmente */
            box-shadow: 0 0 0 2px white; /* Bordo bianco per far risaltare */
            transform: scale(0.9); /* Leggermente più piccolo */
            transform-origin: center;
            transition: transform 0.2s ease-out;
        }

        .cart-badge.hidden {
            display: none;
        }

        .cart-badge:not(.hidden) {
            animation: bounceIn 0.3s forwards;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }   /* Stile per la barra di ricerca più sottile */
        .search-input-thin {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            height: 3rem;
        }

        /* Stili per la mini anteprima dei prodotti nella ricerca */
        .search-product-item {
            display: flex;
            align-items: center;
            background-color: #fff;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            padding: 0.75rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            text-align: left;
            text-decoration: none; /* Rimuove sottolineatura sui link */
            color: inherit; /* Mantiene il colore del testo */
            margin-bottom: 0.5rem; /* Spazio tra gli elementi nella tendina */
        }
        .search-product-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        /* MODIFICA: Immagini più grandi e con object-fit: contain */
        .search-product-item img {
            width: 3.5rem; /* Aumentato da 2.5rem */
            height: 3.5rem; /* Aumentato da 2.5rem */
            object-fit: contain; /* MODIFICA: Mantiene le proporzioni, non taglia */
            border-radius: 0.25rem;
            margin-right: 0.75rem;
            flex-shrink: 0;
            background-color: #f9f9f9; /* Colore di sfondo per lo spazio vuoto */
            padding: 0.25rem; /* Piccolo padding per non far toccare l'immagine con il bordo */
        }

        /* NUOVI STILI PER IL CONTENITORE SUGGERIMENTI */
        .autocomplete-results {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            width: 100%;
            max-height: 400px;
            overflow-y: auto;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            z-index: 100;
            padding: 0.75rem;
        }

        @media (min-width: 640px) { /* sm breakpoint */
            .autocomplete-results {
                left: 50%;
                transform: translateX(-50%);
                width: calc(75% + 0.5rem);
            }
        }
    
    </style>
</head>
<body class="bg-gray-50">
    <header class="sticky top-0 z-50 bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <a href="index.html" class="flex items-center no-underline hover:no-underline">
                    <img src="https://i.imgur.com/PigMJrD.jpeg" alt="Il mio logo" class="h-10">
                </a>
            </div>

            <div class="hidden md:flex space-x-8">
                <a href="shop.html" class="text-sm uppercase hover:text-gray-600">Negozio</a>
                <a href="collections.html" class="text-sm uppercase hover:text-gray-600">Collezioni</a>
                <a href="features.html" class="text-sm uppercase hover:text-gray-600">Partnership</a>
            </div>

            <div class="flex items-center space-x-4 md:space-x-6">
                <a href="search.html" class="text-xl"><i class="fas fa-search"></i></a>
                
                <a href="cart.html" class="text-xl relative">
                    <i class="fas fa-shopping-bag"></i>
                    <span id="cart-item-count" class="cart-badge hidden">0</span>
                </a>

                <div class="md:hidden">
                    <button id="mobile-menu-button" class="focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="mobile-menu md:hidden bg-white py-2 shadow-lg">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="shop.html?category=uomo" class="block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Uomo</a>
                <a href="shop.html?category=donna" class="block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Donna</a>
                <a href="shop.html?category=bambini" class="block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Bambini</a>
                <a href="collections.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Collezioni</a>
                <a href="features.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Partnership</a>
            </div>
        </div>
    </header>

    <main>
        <section class="bg-gray-50 py-16 md:py-24">
            <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 text-gray-900">Cerca su Cmarine</h1>
                <p class="text-lg text-gray-700 mb-8">
                    Trova i tuoi capi e accessori preferiti tra le nostre collezioni.
                </p>
                <div class="relative flex flex-col sm:flex-row items-center justify-center gap-4">
                    <input type="text" id="search-input" placeholder="Cerca prodotti, categorie, brand..."
                            class="w-full sm:w-3/4 px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-lg search-input-thin">
                    <button id="search-button"
                            class="w-full sm:w-auto bg-black text-white px-8 py-3 text-sm uppercase tracking-wider rounded-md hover:bg-gray-800 transition duration-300 ease-in-out">
                        Cerca
                    </button>
                    <div id="autocomplete-results" class="autocomplete-results hidden">
                        <p id="autocomplete-no-results" class="text-center text-gray-600 hidden py-2">Nessun suggerimento trovato.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 bg-white rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-center mb-6">Ricerche Popolari</h2>
            <div class="flex flex-wrap justify-center gap-3">
                <a href="javascript:void(0)" class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-full text-sm hover:bg-gray-300 transition" data-search-term="Jeans">Jeans</a>
                <a href="javascript:void(0)" class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-full text-sm hover:bg-gray-300 transition" data-search-term="Felpe">scarpe</a>
                <a href="javascript:void(0)" class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-full text-sm hover:bg-gray-300 transition" data-search-term="Sneakers">accessori</a>
                <a href="javascript:void(0)" class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-full text-sm hover:bg-gray-300 transition" data-search-term="Giacche">Giacche</a>
                <a href="javascript:void(0)" class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-full text-sm hover:bg-gray-300 transition" data-search-term="Accessori">maglia</a>
                <a href="javascript:void(0)" class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-full text-sm hover:bg-gray-300 transition" data-search-term="T-shirt">giubbotti</a>
            </div>
        </section>

        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <h2 class="text-2xl font-bold text-center mb-6">Esplora le Categorie</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="overflow-hidden rounded-lg shadow-md group">
                    <img src="https://i.imgur.com/6Q170zH.jpeg" alt="Nuovi Arrivi" class="w-full h-auto object-cover group-hover:scale-105 transition-transform duration-300">
                    <div class="p-4 bg-white text-center">
                        <h3 class="text-lg font-semibold">Collezzione Donna</h3>
                        <a href="shop.html?category=Donna" class="text-sm text-gray-700 hover:underline">Scopri</a>
                    </div>
                </div>
                <div class="overflow-hidden rounded-lg shadow-md group">
                    <img src="https://i.imgur.com/5i3jFpB.jpeg" alt="Collezione Uomo" class="w-full h-auto object-cover group-hover:scale-105 transition-transform duration-300">
                    <div class="p-4 bg-white text-center">
                        <h3 class="text-lg font-semibold">Collezione Uomo</h3>
                        <a href="shop.html?category=uomo" class="text-sm text-gray-700 hover:underline">Acquista Ora</a>
                    </div>
                </div>
                <div class="overflow-hidden rounded-lg shadow-md group">
                    <img src="https://i.imgur.com/NHvXji2.jpeg" alt="I Più Venduti" class="w-full h-auto object-cover group-hover:scale-105 transition-transform duration-300">
                    <div class="p-4 bg-white text-center">
                        <h3 class="text-lg font-semibold">Collezione Bambini</h3>
                        <a href="shop.html?category=Bambini" class="text-sm text-gray-700 hover:underline">Vedi</a>
                    </div>
                </div>
            </div>
        </section>
    </main>
<!-- Begin Brevo Form -->
<!-- START - We recommend to place the below code in head tag of your website html  -->
<style>
  @font-face {
    font-display: block;
    font-family: Roboto;
    src: url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/7529907e9eaf8ebb5220c5f9850e3811.woff2) format("woff2"), url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/25c678feafdc175a70922a116c9be3e7.woff) format("woff")
  }

  @font-face {
    font-display: fallback;
    font-family: Roboto;
    font-weight: 600;
    src: url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/6e9caeeafb1f3491be3e32744bc30440.woff2) format("woff2"), url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/71501f0d8d5aa95960f6475d5487d4c2.woff) format("woff")
  }

  @font-face {
    font-display: fallback;
    font-family: Roboto;
    font-weight: 700;
    src: url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/3ef7cf158f310cf752d5ad08cd0e7e60.woff2) format("woff2"), url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/ece3a1d82f18b60bcce0211725c476aa.woff) format("woff")
  }

  #sib-container input:-ms-input-placeholder {
    text-align: left;
    font-family: Helvetica, sans-serif;
    color: #716e6e;
  }

  #sib-container input::placeholder {
    text-align: left;
    font-family: Helvetica, sans-serif;
    color: #716e6e;
  }

  #sib-container textarea::placeholder {
    text-align: left;
    font-family: Helvetica, sans-serif;
    color: #716e6e;
  }

  #sib-container a {
    text-decoration: underline;
    color: #2BB2FC;
  }
</style>
<link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">
<!--  END - We recommend to place the above code in head tag of your website html -->

<!-- START - We recommend to place the below code where you want the form in your website html  -->
<div class="sib-form" style="text-align: center;
         background-color: #EFF2F7;                                 ">
  <div id="sib-form-container" class="sib-form-container">
    <div id="error-message" class="sib-form-message-panel" style="font-size:16px; text-align:left; font-family:Helvetica, sans-serif; color:#661d1d; background-color:#ffeded; border-radius:3px; border-color:#ff4949;max-width:540px;">
      <div class="sib-form-message-panel__text sib-form-message-panel__text--center">
        <svg viewBox="0 0 512 512" class="sib-icon sib-notification__icon">
          <path d="M256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm-11.49 120h22.979c6.823 0 12.274 5.682 11.99 12.5l-7 168c-.268 6.428-5.556 11.5-11.99 11.5h-8.979c-6.433 0-11.722-5.073-11.99-11.5l-7-168c-.283-6.818 5.167-12.5 11.99-12.5zM256 340c-15.464 0-28 12.536-28 28s12.536 28 28 28 28-12.536 28-28-12.536-28-28-28z" />
        </svg>
        <span class="sib-form-message-panel__inner-text">
                          La tua iscrizione non può essere convalidata.
                      </span>
      </div>
    </div>
    <div></div>
    <div id="success-message" class="sib-form-message-panel" style="font-size:16px; text-align:left; font-family:Helvetica, sans-serif; color:#085229; background-color:#e7faf0; border-radius:3px; border-color:#13ce66;max-width:540px;">
      <div class="sib-form-message-panel__text sib-form-message-panel__text--center">
        <svg viewBox="0 0 512 512" class="sib-icon sib-notification__icon">
          <path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 464c-118.664 0-216-96.055-216-216 0-118.663 96.055-216 216-216 118.664 0 216 96.055 216 216 0 118.663-96.055 216-216 216zm141.63-274.961L217.15 376.071c-4.705 4.667-12.303 4.637-16.97-.068l-85.878-86.572c-4.667-4.705-4.637-12.303.068-16.97l8.52-8.451c4.705-4.667 12.303-4.637 16.97.068l68.976 69.533 163.441-162.13c4.705-4.667 12.303-4.637 16.97.068l8.451 8.52c4.668 4.705 4.637 12.303-.068 16.97z" />
        </svg>
        <span class="sib-form-message-panel__inner-text">
                          La tua iscrizione è avvenuta correttamente.
                      </span>
      </div>
    </div>
    <div></div>
    <div id="sib-container" class="sib-container--large sib-container--vertical" style="text-align:center; background-color:rgba(3,2,2,1); max-width:540px; border-radius:3px; border-width:1px; border-color:#020203; border-style:solid; direction:ltr">
      <form id="sib-form" method="POST" action="https://16d50c30.sibforms.com/serve/MUIFAD9TXScE1MH3F0qel6S3jfP0w6bSn-l8fl9UDWHoZdV_D34up2OGFcPLyoDr6KP2XiW6OPR5ZamGqhzqD3Q9VeI-R1D2Rnp1vvssGUax9eyhSsbShaZZjj7c29vMbCCb0g9Kg3U09F9z0dq81XcnlAA6iOvkEzfEKdHoAqVzkqVOTbxzRK3DXqLFAZj-5KlwexuK5i6MAdty" data-type="subscription">
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="font-size:11px; text-align:center; font-family:Helvetica, sans-serif; color:#fdfeff; background-color:transparent; text-align:center">
            <div class="sib-text-form-block">
              <p>SPEDIZIONE GRATUITA SUL TUO PRIMO ORDINE</p>
            </div>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="font-size:32px; text-align:center; font-weight:700; font-family:Helvetica, sans-serif; color:#fafafa; background-color:transparent; text-align:center">
            <p>Iscriviti alla Nostra Newsletter</p>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="font-size:11px; text-align:center; font-family:Helvetica, sans-serif; color:#fdfeff; background-color:transparent; text-align:center">
            <div class="sib-text-form-block">
              <p>Iscriviti per accesso anticipato a lanci, promozioni ed eventi.</p>
            </div>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-input sib-form-block">
            <div class="form__entry entry_block">
              <div class="form__label-row ">

                <div class="entry__field">
                  <input class="input " type="text" id="EMAIL" name="EMAIL" autocomplete="off" placeholder="Il tuo indirizzo email" data-required="true" required />
                </div>
              </div>

              <label class="entry__error entry__error--primary" style="font-size:16px; text-align:left; font-family:Helvetica, sans-serif; color:#661d1d; background-color:#ffeded; border-radius:3px; border-color:#ff4949;">
              </label>
            </div>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="text-align: center">
            <button class="sib-form-block__button sib-form-block__button-with-loader" style="font-size:17px; text-align:center; font-weight:700; font-family:Helvetica, sans-serif; color:#030202; background-color:#f7f9fc; border-radius:1px; border-width:0px;" form="sib-form" type="submit">
              <svg class="icon clickable__icon progress-indicator__icon sib-hide-loader-icon" viewBox="0 0 512 512" style="">
                <path d="M460.116 373.846l-20.823-12.022c-5.541-3.199-7.54-10.159-4.663-15.874 30.137-59.886 28.343-131.652-5.386-189.946-33.641-58.394-94.896-95.833-161.827-99.676C261.028 55.961 256 50.751 256 44.352V20.309c0-6.904 5.808-12.337 12.703-11.982 83.556 4.306 160.163 50.864 202.11 123.677 42.063 72.696 44.079 162.316 6.031 236.832-3.14 6.148-10.75 8.461-16.728 5.01z" />
              </svg>
              ISCRIVITI
            </button>
          </div>
        </div>

        <input type="text" name="email_address_check" value="" class="input--hidden">
        <input type="hidden" name="locale" value="it">
      </form>
    </div>
  </div>
</div>
<!-- END - We recommend to place the above code where you want the form in your website html  -->

<!-- START - We recommend to place the below code in footer or bottom of your website html  -->
<script>
  window.REQUIRED_CODE_ERROR_MESSAGE = 'Scegli un prefisso paese';
  window.LOCALE = 'it';
  window.EMAIL_INVALID_MESSAGE = window.SMS_INVALID_MESSAGE = "Le informazioni fornite non sono valide. Controlla il formato del campo e riprova.";

  window.REQUIRED_ERROR_MESSAGE = "Questo campo non può essere lasciato vuoto. ";

  window.GENERIC_INVALID_MESSAGE = "Le informazioni fornite non sono valide. Controlla il formato del campo e riprova.";




  window.translation = {
    common: {
      selectedList: '{quantity} lista selezionata',
      selectedLists: '{quantity} liste selezionate',
      selectedOption: '{quantity} selezionato',
      selectedOptions: '{quantity} selezionati',
    }
  };

  var AUTOHIDE = Boolean(0);
</script>

<script defer src="https://sibforms.com/forms/end-form/build/main.js"></script>


<!-- END - We recommend to place the above code in footer or bottom of your website html  -->
<!-- End Brevo Form -->
    <footer class="bg-gray-100 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-left">
                <div class="footer-accordion">
                    <div class="footer-accordion-header md:mb-4">
                        <h3 class="text-sm font-semibold uppercase tracking-wider">Acquista</h3>
                        <i class="fas fa-chevron-down arrow-icon text-gray-500 md:hidden"></i>
                    </div>
                    <ul class="space-y-2 footer-accordion-content">
                        <li><a href="shop.html" class="text-sm hover:underline text-gray-700">Nuovi Arrivi</a></li>
                        <li><a href="collections.html" class="text-sm hover:underline text-gray-700">Collezioni</a></li>
                        <li><a href="shop.html" class="text-sm hover:underline text-gray-700">Saldi</a></li>
                    </ul>
                </div>

                <div class="footer-accordion">
                    <div class="footer-accordion-header md:mb-4">
                        <h3 class="text-sm font-semibold uppercase tracking-wider">Chi Siamo</h3>
                        <i class="fas fa-chevron-down arrow-icon text-gray-500 md:hidden"></i>
                    </div>
                    <ul class="space-y-2 footer-accordion-content">
                        <li><a href="#" class="text-sm hover:underline text-gray-700">La Nostra Storia</a></li>
                        <li><a href="brands.html" class="text-sm hover:underline text-gray-700">Partnership</a></li>
                        <li><a href="#" class="text-sm hover:underline text-gray-700">Dove Trovarci</a></li>
                    </ul>
                </div>

                <div class="footer-accordion">
                    <div class="footer-accordion-header md:mb-4">
                        <h3 class="text-sm font-semibold uppercase tracking-wider">Aiuto</h3>
                        <i class="fas fa-chevron-down arrow-icon text-gray-500 md:hidden"></i>
                    </div>
                    <ul class="space-y-2 footer-accordion-content">
                        <li><a href="contact.html" class="text-sm hover:underline text-gray-700">Contattaci</a></li>
                        <li><a href="#" class="text-sm hover:underline text-gray-700">Spedizione</a></li>
                        <li><a href="#" class="text-sm hover:underline text-gray-700">Resi</a></li>
                        <li><a href="#" class="text-sm hover:underline text-gray-700">FAQ</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider mb-4">Connettiti</h3>
                    <div class="flex justify-center md:justify-start space-x-4 mb-4">
                        <a href="#" class="text-gray-700 hover:text-gray-900" aria-label="Instagram"><i class="fab fa-instagram text-xl"></i></a>
                        <a href="#" class="text-gray-700 hover:text-gray-900" aria-label="Twitter"><i class="fab fa-twitter text-xl"></i></a>
                        <a href="#" class="text-gray-700 hover:text-gray-900" aria-label="Facebook"><i class="fab fa-facebook-f text-xl"></i></a>
                    </div>
                    <p class="text-sm text-gray-600 leading-relaxed">Iscriviti alla nostra newsletter per ricevere aggiornamenti sui nuovi arrivi, offerte speciali e altre informazioni sugli sconti.</p>
                </div>
            </div>
            <div class="border-t border-gray-200 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center text-gray-600">
                <p class="text-sm text-center md:text-left mb-4 md:mb-0">© 2025 Cmarine. Tutti i diritti riservati.</p>
                <div class="flex flex-wrap justify-center md:justify-end space-x-4 sm:space-x-6">
                    <a href="#" class="text-sm hover:underline">Privacy Policy</a>
                    <a href="#" class="text-sm hover:underline">Terms of Service</a>
                    <a href="#" class="text-sm hover:underline">Accessibility</a>
                </div>
            </div>
        </div>
    </footer>
<script>
    // GLOBAL CART FUNCTIONS - QUESTE DEVONO ESSERE UGUALI IN TUTTE LE PAGINE DEL TUO SITO
    let cart = JSON.parse(localStorage.getItem('cmarineCart')) || [];
    const CART_STORAGE_KEY = 'cmarineCart';

    function saveCartToLocalStorage() {
        localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
    }

    function updateCartCounter() {
        const cartItemCountElement = document.getElementById('cart-item-count');
        if (cartItemCountElement) {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartItemCountElement.textContent = totalItems;
            if (totalItems > 0) {
                cartItemCountElement.classList.remove('hidden');
            } else {
                cartItemCountElement.classList.add('hidden');
            }
            cartItemCountElement.classList.add('added-to-cart-pulse');
            setTimeout(() => {
                cartItemCountElement.classList.remove('added-to-cart-pulse');
            }, 300);
        }
    }

    window.addProductToCart = function(product, animateButton = null) {
        if (!product.id) {
            console.warn("Product added to cart without an ID. Generating a temporary one.");
            product.id = 'temp-prod-' + Date.now();
        }
        product.quantity = parseInt(product.quantity) || 1;
        if (product.quantity < 1) {
            product.quantity = 1;
        }
        product.price = parseFloat(product.price) || 0;

        const existingProductIndex = cart.findIndex(item => item.id === product.id);
        if (existingProductIndex > -1) {
            cart[existingProductIndex].quantity += product.quantity;
        } else {
            cart.push({ ...product, quantity: product.quantity });
        }
        saveCartToLocalStorage();
        updateCartCounter();

        if (animateButton) {
            animateButton.classList.add('added-to-cart-pulse');
            setTimeout(() => {
                animateButton.classList.remove('added-to-cart-pulse');
            }, 300);
        }
    };

    window.removeProductFromCart = function(productId, quantityToRemove = 1) {
        const existingProductIndex = cart.findIndex(item => item.id === productId);

        if (existingProductIndex > -1) {
            cart[existingProductIndex].quantity -= quantityToRemove;
            if (cart[existingProductIndex].quantity <= 0) {
                cart.splice(existingProductIndex, 1);
            }
            saveCartToLocalStorage();
            updateCartCounter();
        }
    };

    window.setProductQuantityInCart = function(productId, newQuantity) {
        newQuantity = parseInt(newQuantity);
        if (isNaN(newQuantity) || newQuantity < 0) {
            console.warn("Invalid quantity provided for setProductQuantityInCart.");
            return;
        }

        const existingProductIndex = cart.findIndex(item => item.id === productId);

        if (existingProductIndex > -1) {
            if (newQuantity === 0) {
                cart.splice(existingProductIndex, 1);
            } else {
                cart[existingProductIndex].quantity = newQuantity;
            }
            saveCartToLocalStorage();
            updateCartCounter();
        }
    };

    function initializeCartFeatures() {
        updateCartCounter();
    }
    // FINE DELLE FUNZIONI GLOBALI DEL CARRELLO
    // ---

    document.addEventListener('DOMContentLoaded', function() {
        console.log("Script search.js caricato e DOM pronto.");

        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const autocompleteResultsContainer = document.getElementById('autocomplete-results');
        const autocompleteNoResultsMessage = document.getElementById('autocomplete-no-results');

        if (!searchInput) console.error("Errore: Elemento #search-input non trovato!");
        if (!searchButton) console.error("Errore: Elemento #search-button non trovato!");
        if (!autocompleteResultsContainer) console.error("Errore: Elemento #autocomplete-results non trovato!");
        if (!autocompleteNoResultsMessage) console.error("Errore: Elemento #autocomplete-no-results non trovato!");

        // Ho consolidato i dati dei prodotti. Userò 'products' come fonte principale.
        // Se 'allProducts' era usato solo per l'autocomplete e aveva meno dati,
        // è meglio usare una singola fonte completa. Ho rinominato imageUrl a image
        // per essere consistente con la sezione shop.html.
         const products = [
            { id: 1, name: "HP AHIGA EVO 5", price: 120.00, image: "https://i.imgur.com/H68Dwfb.jpeg", category: "scarpe", gender: "uomo", details: "Scarpe da uomo per sport acquatici." },
            { id: 2, name: "W HP MARINE LS", price: 145.00, image: "https://i.imgur.com/nj6zDLP.jpeg", category: "scarpe", gender: "uomo", details: "T-shirt a maniche lunghe da donna." },
            { id: 3, name: "W ANAKIN LEATHER 2", price: 133.00, image: "https://i.imgur.com/pKxQXlB.jpeg", category: "scarpe", gender: "donna", details: "Sneakers in pelle da donna." },
            { id: 4, name: "CREW LOW", price: 135.00, image: "https://i.imgur.com/Yoca5iJ.jpeg", category: "scarpe", gender: "uomo", details: "T-shirt casual da uomo." },
            { id: 5, name: "HH QD CARGO SHORTS 11", price: 84.00, image: "https://i.imgur.com/yorxeV8.jpeg", category: "bermuda", gender: "uomo", details: "Shorts cargo quick dry da uomo." },
            { id: 6, name: "HH QD CARGO SHORTS 11\" NEW", price: 84.00, image: "https://i.imgur.com/pD9YLMu.jpeg", category: "bermuda", gender: "uomo", details: "Nuovi shorts cargo quick dry da uomo." },
            { id: 7, name: "HH QD CARGO SHORTS 11\" V2", price: 84.00, image: "https://i.imgur.com/NqBYqMi.jpeg", category: "bermuda", gender: "uomo", details: "Versione 2 degli shorts cargo quick dry da uomo." },
            { id: 8, name: "DRIFTLINE POLO", price: 73.00, image: "https://i.imgur.com/L4CtSsY.jpeg", category: "polo", gender: "uomo", details: "Polo Driftline per uomo." },
            { id: 9, name: "DRIFTLINE POLO V2", price: 73.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/9765e42d-8be2-423a-b08f-be4a1dc61ab1.png?cacheVersion=1715175947", category: "polo", gender: "uomo", details: "Polo Driftline per uomo, versione 2." },
            { id: 10, name: "CREWLINE LS POLO", price: 78.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/34f3961501bc4f0bbe8927c0948419a2.png?cacheVersion=1747293531", category: "polo", gender: "uomo", details: "Polo a maniche lunghe unisex." },
            { id: 11, name: "HH LOGO T-SHIRT 2.0", price: 38.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/files/others/b198611d-d14d-433c-99c8-bd4c5755264e.jpg?cacheVersion=1747232962", category: "t-shirts", gender: "donna", details: "T-shirt con logo HH 2.0 da donna." },
            { id: 12, name: "HH LOGO T-SHIRT 2.0 V2", price: 38.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/db54de6a-8b9c-47a4-863b-17a3b7b6c8ed.png?cacheVersion=1747232962", category: "t-shirts", gender: "uomo", details: "T-shirt con logo HH 2.0 v2 da uomo." },
            { id: 13, name: "HH TECH T-SHIRT 2.0", price: 33.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/7d1c28c2-eeb5-478d-9b68-f74fc7e241de.png?cacheVersion=1747826872", category: "t-shirts", gender: "uomo", details: "T-shirt tecnica HH 2.0 per bambini." },
            { id: 14, name: "HH TECH T-SHIRT 2.0 V2", price: 33.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/67a68603-c835-4d87-829b-625749589375.png?cacheVersion=1747826872", category: "t-shirts", gender: "uomo", details: "T-shirt tecnica HH 2.0 v2 da donna." },
            { id: 15, name: "HH TECH T-SHIRT 2.0 V3", price: 33.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/69a91f5f-b519-4fd8-832e-de3d1be7144e.png?cacheVersion=1747826872", category: "t-shirts", gender: "uomo", details: "T-shirt tecnica HH 2.0 v3 da uomo." },
            { id: 16, name: "CREW JACKET 2.0", price: 170.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/7207fa52-b7a4-4c56-963f-e33a017185a8.png?cacheVersion=1746187241", category: "giacche", gender: "uomo", details: "Giacca Crew 2.0 per uomo." },
            { id: 17, name: "CREW VEST 2.0", price: 152.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/7b0bee14-41b6-412b-8c9d-8d9f84a87639.png?cacheVersion=1747294479", category: "giacche", gender: "uomo", details: "Gilet Crew 2.0 per uomo." },
            { id: 18, name: "CREW VEST 2.0 V2", price: 152.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/files/others/64b4965f-b920-4d6a-9c01-2a1662d2dcfc.jpg?cacheVersion=1747917841", category: "giacche", gender: "uomo", details: "Gilet Crew 2.0 v2 per donna." },
            { id: 19, name: "PIER 3.0 JACKET", price: 280.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/d790421cbd49482398dc4f93837002bd.png?cacheVersion=1699967242", category: "giubbotti", gender: "uomo", details: "Giacca Pier 3.0 ad alte prestazioni." },
            { id: 20, name: "PIER 3.0 BIB", price: 220.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/caafd8784f03475ca29cf474d82a48dd.png?cacheVersion=1699966954", category: "giubbotti", gender: "uomo", details: "Salopette Pier 3.0." },
            { id: 21, name: "NEWPORT BOARD SHORTS 8\"", price: 69.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/d05b87cf-5e79-4d20-8e76-eb8b529291d9.png?cacheVersion=1714054491", category: "costumi", gender: "uomo", details: "Board shorts Newport 8 pollici." },
            { id: 22, name: "HP CURVE BOARD SHORTS 7\"", price: 75.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/33b45a5f-972f-4d24-9a83-51e239ffc309.png?cacheVersion=1710236979", category: "costumi", gender: "uomo", details: "Board shorts HP Curve 7 pollici." },
            { id: 23, name: "HH SOUWESTER", price: 35.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/8269c68e-9406-42df-9f2e-cdac2e2a71e2.png?cacheVersion=1714396721", category: "accessories", gender: "unisex", details: "Cappello impermeabile Souwester." },
            { id: 24, name: "CREW CAP 2.0", price: 33.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/e8154d74c3374c5e9627e08d5892f77a.png?cacheVersion=1690988202", category: "cappelli", gender: "unisex", details: "Cappellino Crew 2.0." },
            { id: 25, name: "CREW CAP 2.0", price: 33.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/bf31c9df-e9b5-4b95-84c9-d65e459aee69.png?cacheVersion=1746187239", category: "cappelli", gender: "unisex", details: "Cappellino Crew 2.0 v2." },
            { id: 26, name: "CREW CAP 2.0", price: 33.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/e027e1e1-243e-4f11-af08-f2b4e510b368.png?cacheVersion=1746187239", category: "cappelli", gender: "unisex", details: "Cappellino Crew 2.0 v3." },
            { id: 27, name: "WANDERER SHOULDER BAG", price: 40.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/569f0929-ca9a-4715-92e6-57333e6c1307.png?cacheVersion=1714117164", category: "accessori", gender: "unisex", details: "Borsa a tracolla Wanderer." },
            { id: 28, name: "WANDERER SHOULDER BAG", price: 40.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/7f42ff1b-bc5f-4347-b80f-8990718b385d.png?cacheVersion=1714117166", category: "accessori", gender: "unisex", details: "Borsa a tracolla Wanderer v2." },
            { id: 29, name: "CEDAR 25L BACKPACK", price: 150.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/55dfa3bc-43ee-4ccf-857d-d36e94fba495.png?cacheVersion=1745578924", category: "accessori", gender: "unisex", details: "Zaino Cedar da 25L." },
            { id: 30, name: "H/H SCOUT DUFFEL", price: 93.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/d312abaf-6194-4a1f-bccb-732871bbda76.png?cacheVersion=1710236985", category: "accessori", gender: "unisex", details: "Borsone Scout S." },
            { id: 31, name: "SPORT II", price: 54.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/5157278aef2b4f8ea2278c7c55e0b6a2.png?cacheVersion=1690988247", category: "accessori", gender: "unisex", details: "Sandali sportivi II." },
            { id: 32, name: "JR RIDER VEST", price: 50.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/04f415289a5943329f5449554731c50b.png?cacheVersion=1682061970", category: "outerwear", gender: "bambini", details: "Gilet da bambino JR Rider." },
            { id: 33, name: "PARAMOUNT HOODED SOFTSHELL JKT", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/e9a968c61ae847a68158bffa4c0d9c79.png?cacheVersion=1710236991", category: "accessories", gender: "unisex", details: "Calzini alla caviglia (confezione da 2)." },
            { id: 34, name: "CREW HOODED MIDLAYER JACKET 2", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/fa0b72ab-da50-478e-bf5d-6eb4cd2d10b5.png?cacheVersion=1756978327", category: "t-shirts", gender: "bambini", details: "T-shirt grafica per bambini." },
            { id: 35, name: "CREW HOODED MIDLAYER JACKET 2", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/3988c0ae-ef43-4d48-b496-fa40f3841618.png?cacheVersion=1755542923", category: "scarpe", gender: "unisex", details: "Sandali sportivi v2." },
            { id: 36, name: "CREW HOODED MIDLAYER JACKET 2", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/bcb981c3-afb5-415f-be61-4049a3ef24f6.png?cacheVersion=1755542761", category: "outerwear", gender: "uomo", details: "Gilet imbottito leggero." },
            { id: 37, name: "CREW HOODED MIDLAYER JACKET 2", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/b5228a75-e3d4-4611-b926-d5d52e3c6b07.png?cacheVersion=1755542993", category: "bottoms", gender: "donna", details: "Shorts in denim da donna." },
            { id: 38, name: "HP RACING LIFALOFT BOMBER", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/c6d0f0e969894fff84960e69e09e7682.png?cacheVersion=1658997341", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 39, name: "HP RACING LIFALOFT BOMBER", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/d8f3954bc9ae48aabfb70ab1072a6160.png?cacheVersion=1658997341", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 40, name: "ARCTIC OCEAN HYBRID INSULATOR", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/8459bf80-b840-4416-8335-f1bd7589580d.png?cacheVersion=1755071407", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
               { id: 41, name: "ARCTIC OCEAN HYBRID INSULATOR", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/e3e9a9162b8d496e847782819c291130.png?cacheVersion=1690988235", category: "scarpe", gender: "unisex", details: "Sandali sportivi v2." },
            { id: 42, name: "HP OCEAN SWT PANT 2.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/a1ad6187-78bb-49f4-9945-9b1b357d6660.png?cacheVersion=1714117764", category: "outerwear", gender: "uomo", details: "Gilet imbottito leggero." },
            { id: 43, name: "HP OCEAN FZ JACKET 2.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/d7bbc751a28c46149c82004582ca8c06.png?cacheVersion=1682061172", category: "outerwear", gender: "uomo", details: "Gilet imbottito leggero." },
            { id: 44, name: "HP OCEAN FZ JACKET 2.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/9143740174f14673b8658d7a29800c2a.png?cacheVersion=1686231296", category: "bottoms", gender: "donna", details: "Shorts in denim da donna." },
            { id: 45, name: "HP FLEECE JACKET 2.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/1cbd2f799cd64ffea5c534a3fe4a4f3e.png?cacheVersion=1682061174", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 46, name: "PIER JACKET 4.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/3e52fbe9-a5ac-41fe-8199-d56fea2cf72b.png?cacheVersion=1756978329", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 47, name: "PIER BIB 4.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/622dd25b-6715-4cae-b94b-b7a00f8052fa.png?cacheVersion=1756978323", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
            { id: 48, name: "APRES KNITTED SWEATER", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/a737c722-80ac-4221-9c66-883718d70225.png?cacheVersion=1756978323", category: "outerwear", gender: "uomo", details: "Gilet imbottito leggero." },
            { id: 49, name: "REINE PARKA", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/b37bd1bb7a124c9bb289a536f8e9c348.png?cacheVersion=1659015721", category: "bottoms", gender: "donna", details: "Shorts in denim da donna." },
            { id: 50, name: "BUSINESS BEANIE 2", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/02b8ecaa-6cbf-4362-9887-97e638d5045a.png?cacheVersion=1714117177", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 51, name: "BRAND BEANIE", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/9024c503-f29a-417a-a9a2-3510c581fc52.png?cacheVersion=1756978327", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 52, name: "BRAND BEANIE", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/2e2ea93805c6457ab346e6e6ed76f1e2.png?cacheVersion=1756978327", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
               { id: 53, name: "URBAN CUFF BEANIE", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/55ee6ccfa217478dabfb56896888c720.png?cacheVersion=1756978323", category: "scarpe", gender: "unisex", details: "Sandali sportivi v2." },
            { id: 54, name: "HH RIB BEANIE", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/a98923c5-cda9-4387-bba8-2aa320acb3ab.png?cacheVersion=1756978329", category: "outerwear", gender: "uomo", details: "Gilet imbottito leggero." },
            { id: 55, name: "HH RIB BEANIE", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/37095866-0d26-48e5-a2d4-3aedcc7ea05a.png?cacheVersion=1756978323", category: "outerwear", gender: "uomo", details: "Gilet imbottito leggero." },
            { id: 56, name: "POLARTEC NECK", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/37266cc0-9519-414a-9dc0-49e736972c28.png?cacheVersion=1756978329", category: "bottoms", gender: "donna", details: "Shorts in denim da donna." },
            { id: 57, name: "Termoli HT", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/d3c7c55b-f7f5-4982-94b9-153a9c7bbc34.png?cacheVersion=1729165508", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 58, name: "NORDVIK 2", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/8bfc372a58604a47b141ee0fa9020476.png?cacheVersion=1690988240", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 59, name: "H/H SCOUT WASH BAG", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/237b4c76-718f-49b8-9daf-079e750c55b5.png?cacheVersion=1759310107", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
              { id: 60, name: "H/H SCOUT WASH BAG", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/6c0f6de81b134deebb6ebe4cf64778c8.png?cacheVersion=1756978323", category: "bottoms", gender: "donna", details: "Shorts in denim da donna." },
            { id: 61, name: "H/H SCOUT DUFFEL S", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/824aadcf-834a-448e-9039-8b59476e5613.png?cacheVersion=1756978323", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 62, name: "H/H SCOUT DUFFEL S", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/beb24a540d614ae58a41d615d6bc42c0.png?cacheVersion=1756978323", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 63, name: "H/H SCOUT DUFFEL M", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/df98fdec32614279982bde94698ffbc1.png?cacheVersion=1755537712", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
             { id: 64, name: "W CREW HOODED MIDL JACKET 2.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/2ec23bb4-37ff-4f0a-b06f-8ea83fe029eb.png?cacheVersion=1755544262", category: "bottoms", gender: "donna", details: "Shorts in denim da donna." },
            { id: 65, name: "W VARDE FLEECE JACKET 2.0", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/eab5a03a59f84271ab9c6dced1df71b1.png?cacheVersion=1710236990", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 66, name: "W ESSENCE DOWN JACKET", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/c97612b8-914d-4001-8f55-ed6bd8bd2833.png?cacheVersion=1758025639", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 67, name: "W WELSEY II TRENCH", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/31fa250d07ef40558f9e7aa5c8d30965.png?cacheVersion=1690988242", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
            { id: 68, name: "W ADORE BOOT", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/7cfc6c094fdb4adc89624e920a7a11d8.png?cacheVersion=1682060180", category: "accessories", gender: "unisex", details: "Occhiali da sole sportivi." },
            { id: 69, name: "W ESSENCE DOWN JACKET", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/c97612b8-914d-4001-8f55-ed6bd8bd2833.png?cacheVersion=1758025639", category: "scarpe", gender: "donna", details: "Scarpe da running professionali." },
            { id: 70, name: "W ARCTIC OCEAN HYBRID INS", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/lowres/ab9bf9c1a2724641b011076239d20213.png?cacheVersion=1658997341", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." },
             { id: 71, name: "W ARCTIC OCEAN HYBRID INS", price: 0.00, image: "https://brandmaster.hellyhansen.com/fr/gallery/11231/images/images/lowres/404e55f9-2e79-477b-bc84-cf3db585f68c.png?cacheVersion=1758025336", category: "t-shirts", gender: "unisex", details: "T-shirt basica unisex." }
        ];


        let searchTimeout;

        function updateUrlWithQuery(query) {
            const newUrl = new URL(window.location.href);
            if (query) {
                newUrl.searchParams.set('q', query);
            } else {
                newUrl.searchParams.delete('q');
            }
            window.history.replaceState({ path: newUrl.href }, '', newUrl.href);
        }

        function performAutocompleteSearch(query) {
            console.log(`Eseguo autocompletamento per: "${query}"`);

            autocompleteResultsContainer.innerHTML = '';
            autocompleteNoResultsMessage.classList.add('hidden');

            if (query.trim() === "") {
                autocompleteResultsContainer.classList.add('hidden');
                return;
            }

            const lowerCaseQuery = query.toLowerCase();
            const maxSuggestions = 5;
            // Usa l'array 'products' per l'autocompletamento
            const filteredProductsAutocomplete = products.filter(product =>
                product.name.toLowerCase().includes(lowerCaseQuery) ||
                product.category.toLowerCase().includes(lowerCaseQuery) ||
                product.gender.toLowerCase().includes(lowerCaseQuery)
            ).slice(0, maxSuggestions);

            if (filteredProductsAutocomplete.length > 0) {
                console.log(`Trovati ${filteredProductsAutocomplete.length} suggerimenti.`);
                autocompleteResultsContainer.classList.remove('hidden');
                filteredProductsAutocomplete.forEach(product => {
                    const productItem = `
                        <a href="product.html?id=${product.id}" class="search-product-item">
                            <img src="${product.image}" alt="Immagine di ${product.name}">
                            <div>
                                <h3 class="text-base font-medium text-gray-900">${product.name}</h3>
                                <p class="text-sm text-gray-600">€${product.price.toFixed(2)}</p>
                            </div>
                        </a>
                    `;
                    autocompleteResultsContainer.innerHTML += productItem;
                });
            } else {
                autocompleteResultsContainer.classList.remove('hidden');
                autocompleteNoResultsMessage.classList.remove('hidden');
                autocompleteResultsContainer.innerHTML = autocompleteNoResultsMessage.outerHTML;
            }
        }

        if (searchInput) {
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                const query = searchInput.value.trim();
                searchTimeout = setTimeout(() => {
                    performAutocompleteSearch(query);
                }, 300);
            });

            searchButton.addEventListener('click', function() {
                const query = searchInput.value.trim();
                if (query) {
                    window.location.href = `shop.html?q=${encodeURIComponent(query)}`;
                } else {
                    window.location.href = 'shop.html';
                }
                autocompleteResultsContainer.classList.add('hidden');
                updateUrlWithQuery(query);
            });

            searchInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    searchButton.click();
                }
            });

            document.addEventListener('click', function(event) {
                if (!searchInput.contains(event.target) && !autocompleteResultsContainer.contains(event.target)) {
                    autocompleteResultsContainer.classList.add('hidden');
                }
            });

            searchInput.addEventListener('focus', function() {
                const query = searchInput.value.trim();
                if (query) {
                    performAutocompleteSearch(query);
                }
            });

            const urlParams = new URLSearchParams(window.location.search);
            const initialQuery = urlParams.get('q');
            if (initialQuery) {
                searchInput.value = initialQuery;
            }
        }


        document.querySelectorAll('[data-search-term]').forEach(tag => {
            tag.addEventListener('click', function(event) {
                event.preventDefault();
                const searchTerm = this.getAttribute('data-search-term');
                if (searchInput) { // Aggiunto controllo per searchInput
                    searchInput.value = searchTerm;
                }
                window.location.href = `shop.html?q=${encodeURIComponent(searchTerm)}`;
                if (autocompleteResultsContainer) { // Aggiunto controllo per autocompleteResultsContainer
                    autocompleteResultsContainer.classList.add('hidden');
                }
                updateUrlWithQuery(searchTerm);
            });
        });

        // Event listeners per menu mobile (consolidato)
        if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('open');
            });
        }

        // Event listeners per footer accordion (consolidato)
        const footerAccordions = document.querySelectorAll('.footer-accordion');
        footerAccordions.forEach(accordion => {
            const header = accordion.querySelector('.footer-accordion-header');
            const content = accordion.querySelector('.footer-accordion-content');
            header.addEventListener('click', function() {
                if (window.innerWidth < 768) {
                    header.classList.toggle('open');
                    content.classList.toggle('open');
                }
            });
        });

        window.addEventListener('resize', function() {
            if (window.innerWidth >= 768) {
                if (mobileMenu) { // Aggiunto controllo per mobileMenu
                    mobileMenu.classList.remove('open');
                }
            }
        });

        // LOGICA SPECIFICA PER SHOP.HTML (o altre pagine che usano questi elementi)
        // Questi elementi potrebbero non esistere su tutte le pagine, quindi è bene controllarli.
        const productGrid = document.getElementById('product-grid');
        const productCountDisplay = document.getElementById('product-count');
        const categoryFilter = document.getElementById('category-filter');
        const sortBy = document.getElementById('sort-by');
        const paginationContainer = document.getElementById('pagination');

        // Solo se gli elementi esistono, procedi con la logica dello shop
        if (productGrid && productCountDisplay && categoryFilter && sortBy && paginationContainer) {
            let filteredProducts = [...products]; // Copia per i filtri
            const productsPerPage = 8;
            let currentPage = 1;

            // Funzione per recuperare il parametro dalla URL
            function getUrlParameter(name) {
                name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
                let regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
                let results = regex.exec(location.search);
                return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
            }

            function applyFiltersAndSort() {
                let tempProducts = [...products];

                const selectedCategory = categoryFilter.value;
                const urlCategory = getUrlParameter('category');
                const urlSearchQuery = getUrlParameter('q'); // Recupera anche il parametro di ricerca

                // Filtro per categoria e genere (prima dal dropdown, poi dalla URL)
                if (selectedCategory && selectedCategory !== 'all') { // 'all' è un valore comune per "nessun filtro"
                    tempProducts = tempProducts.filter(product =>
                        product.category === selectedCategory || product.gender === selectedCategory
                    );
                } else if (urlCategory) { // Se c'è una categoria nella URL, applicala
                    tempProducts = tempProducts.filter(product =>
                        product.category === urlCategory || product.gender === urlCategory
                    );
                    categoryFilter.value = urlCategory; // Imposta il dropdown al valore della URL
                }

                // Filtro per query di ricerca (se presente nella URL)
                if (urlSearchQuery) {
                    const lowerCaseSearchQuery = urlSearchQuery.toLowerCase();
                    tempProducts = tempProducts.filter(product =>
                        product.name.toLowerCase().includes(lowerCaseSearchQuery) ||
                        product.category.toLowerCase().includes(lowerCaseSearchQuery) ||
                        product.gender.toLowerCase().includes(lowerCaseSearchQuery) ||
                        (product.details && product.details.toLowerCase().includes(lowerCaseSearchQuery))
                    );
                }


                const sortValue = sortBy.value;
                switch (sortValue) {
                    case 'price-asc':
                        tempProducts.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-desc':
                        tempProducts.sort((a, b) => b.price - a.price);
                        break;
                    case 'name-asc':
                        tempProducts.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    case 'name-desc':
                        tempProducts.sort((a, b) => b.name.localeCompare(a.name));
                        break;
                    case 'relevance':
                    default:
                        break;
                }

                filteredProducts = tempProducts;
                currentPage = 1;
                renderProducts();
            }

            function renderProducts() {
                productGrid.innerHTML = '';

                const startIndex = (currentPage - 1) * productsPerPage;
                const endIndex = startIndex + productsPerPage;
                const productsToDisplay = filteredProducts.slice(startIndex, endIndex);

                if (productsToDisplay.length === 0) {
                    productGrid.innerHTML = '<p class="text-center text-gray-600 col-span-full">Nessun prodotto trovato con i filtri selezionati.</p>';
                }

                productsToDisplay.forEach(product => {
                    const productCard = `
                        <div class="product-card relative bg-white group rounded-lg overflow-hidden shadow-sm">
                            <div class="relative overflow-hidden">
                                <a href="product.html?id=${product.id}">
                                    <img src="${product.image}" alt="${product.name}" class="w-full h-auto object-cover transition-transform duration-500 group-hover:scale-105">
                                    <div class="product-overlay absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                        <button class="bg-white text-black px-4 py-2 text-xs uppercase tracking-wider hover:bg-gray-200 transition">Quick View</button>
                                    </div>
                                </a>
                            </div>
                            <div class="mt-3 p-3 text-center">
                                <h3 class="text-sm font-semibold mb-1">${product.name}</h3>
                                <p class="text-gray-700 text-base font-bold">€${product.price.toFixed(2)}</p>
                                <button class="mt-3 bg-blue-600 text-white text-sm px-4 py-2 rounded-md hover:bg-blue-700 transition add-to-cart-btn"
                                    data-product-id="${product.id}"
                                    data-product-name="${product.name}"
                                    data-product-price="${product.price}"
                                    data-product-image="${product.image}">
                                    Aggiungi al Carrello
                                </button>
                            </div>
                        </div>
                    `;
                    productGrid.innerHTML += productCard;
                });

                productCountDisplay.textContent = `${filteredProducts.length} prodotti`;
                renderPagination();

                // Aggiungi event listener per i pulsanti "Aggiungi al Carrello" dopo averli renderizzati
                document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = parseInt(this.dataset.productId);
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            window.addProductToCart(product, this);
                        }
                    });
                });
            }

            function renderPagination() {
                paginationContainer.innerHTML = '';
                const totalPages = Math.ceil(filteredProducts.length / productsPerPage);

                if (totalPages > 1) {
                    for (let i = 1; i <= totalPages; i++) {
                        const pageButton = document.createElement('button');
                        pageButton.textContent = i;
                        pageButton.classList.add('px-3', 'py-1', 'mx-1', 'border', 'rounded');
                        if (i === currentPage) {
                            pageButton.classList.add('bg-blue-600', 'text-white');
                        } else {
                            pageButton.classList.add('bg-white', 'text-blue-600', 'hover:bg-blue-100');
                        }
                        pageButton.addEventListener('click', () => {
                            currentPage = i;
                            renderProducts();
                            window.scrollTo({ top: 0, behavior: 'smooth' }); // Scorri in cima alla pagina
                        });
                        paginationContainer.appendChild(pageButton);
                    }
                }
            }

            categoryFilter.addEventListener('change', applyFiltersAndSort);
            sortBy.addEventListener('change', applyFiltersAndSort);

            // Inizializza filtri e renderizza i prodotti all'apertura della pagina
            // Questo gestirà anche i parametri della URL (category e q)
            applyFiltersAndSort();
        }

        // Inizializza le funzionalità del carrello globalmente
        initializeCartFeatures();
    });
</script>
